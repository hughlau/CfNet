@using CfNet.Admin.Models.Menu
@model PageModel

<link href="@Url.Content("~/Content/all.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Scripts/poshytip/tip-yellow/tip-yellow.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Scripts/editor/css/font-awesome.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Scripts/editor/css/froala_editor.min.css")" rel="stylesheet" type="text/css" />

<script src="@Url.Content("~/Scripts/jquery/jQuery-2.2.0.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery/jquery.unobtrusive-ajax.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/poshytip/jquery.poshytip.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/froala_editor.min.js")"></script>
<script src="@Url.Content("~/Scripts/jquery/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/tables.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/lists.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/colors.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/media_manager.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/font_family.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/font_size.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/block_styles.min.js")"></script>
<script src="@Url.Content("~/Scripts/editor/js/plugins/video.min.js")"></script>
<script src="@Url.Content("~/Scripts/layer/layer.js")"></script>
<div class="book_con01">
    @using (Ajax.BeginForm("Edit", new { }, new AjaxOptions() { HttpMethod = "Post", OnSuccess = "afterEdit" }))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        @Html.HiddenFor(Model => Model.PageId)
        @Html.HiddenFor(Model=>Model.MenuId)
        <h1 class="book_h01">@ViewBag.Title</h1>
        <p class="book_p">
            <table class="book_table" border="1" cellpadding="10">
                <tr>
                    <td>
                        @Html.LabelFor(m => m.PageName, htmlAttributes: new { @class = "td_label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.PageName, htmlAttributes: new { @class = "book_input03" })
                        @Html.ValidationMessageFor(m => m.PageName, null, new { @class = "validate_txt" })
                    </td>
                    <td>
                        @Html.LabelFor(m => m.Url, htmlAttributes: new { @class = "td_label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.Url, htmlAttributes: new { @class = "book_input03" })
                        @Html.ValidationMessageFor(m => m.Url, null, new { @class = "validate_txt" })
                    </td>


                </tr>
                <tr>
                    <td>
                        @Html.LabelFor(m => m.Description, htmlAttributes: new { @class = "td_label" })
                    </td>
                    <td>
                        @Html.TextBoxFor(m => m.Description, htmlAttributes: new { @class = "book_input03" })
                        @Html.ValidationMessageFor(m => m.Description, null, new { @class = "validate_txt" })
                    </td>
                    <td>
                        @Html.LabelFor(m => m.IsValid, htmlAttributes: new { @class = "td_label" })
                    </td>
                    <td>
                        @Html.CheckBoxFor(m => m.IsValid, htmlAttributes: new { @class = "book_input03" })
                        @Html.ValidationMessageFor(m => m.IsValid)
                    </td>

                </tr>





            </table>
        </p>
        <p class="book_foot"><input type="submit" value="保存" /><input type="button" value="重置" /><input type="button" id="btnClose" value="关闭" /></p>
    }
</div>


<script type="text/javascript">
    var index = parent.layer.getFrameIndex(window.name);
    $(function () {
        $("#btnClose").click(function () {
            parent.layer.close(index);
        })
    })
    function afterEdit(data) {
        if (data == "success") {
            layer.alert("操作成功！");
            parent.$('#table').bootstrapTable('refresh');
        } else {
            alert("操作失败！")
        }
    }
</script>